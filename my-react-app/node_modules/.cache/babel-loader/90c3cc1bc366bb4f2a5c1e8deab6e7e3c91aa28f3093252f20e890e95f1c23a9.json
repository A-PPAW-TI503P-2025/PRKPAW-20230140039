{"ast":null,"code":"var _jsxFileName = \"E:\\\\PAW\\\\PRKPAW-20230140039\\\\my-react-app\\\\src\\\\components\\\\PresensiPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\n\n// Fungsi helper untuk mengambil token dari localStorage\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getToken = () => localStorage.getItem(\"token\");\nfunction AttendancePage() {\n  _s();\n  // State untuk pesan sukses/error\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n  const API_URL = \"http://localhost:3001/api/attendance\";\n\n  // Konfigurasi Header untuk menyertakan JWT\n  const getAuthConfig = () => {\n    const token = getToken();\n    if (!token) {\n      navigate(\"/login\"); // Redirect jika token tidak ada\n      return null;\n    }\n    return {\n      headers: {\n        Authorization: `Bearer ${token}` // Menyertakan token JWT\n      }\n    };\n  };\n  const handleCheckIn = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    const config = getAuthConfig();\n    if (!config) return;\n    try {\n      // POST /api/attendance/check-in\n      const response = await axios.post(`${API_URL}/check-in`, {}, config);\n      setMessage(`Check-In Berhasil: ${response.data.message}`);\n    } catch (err) {\n      setError(err.response ? err.response.data.message : \"Check-in gagal\");\n    }\n  };\n  const handleCheckOut = async () => {\n    setError(\"\");\n    setMessage(\"\");\n    const config = getAuthConfig();\n    if (!config) return;\n    try {\n      // POST /api/attendance/check-out\n      const response = await axios.post(`${API_URL}/check-out`, {},\n      // Body kosong, karena userId diambil dari JWT payload\n      config);\n      setMessage(`Check-Out Berhasil: ${response.data.message}`);\n    } catch (err) {\n      setError(err.response ? err.response.data.message : \"Check-out gagal\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 flex items-center justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-8 rounded-lg shadow-md w-full max-w-md text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-bold mb-6 text-gray-800\",\n        children: \"Lakukan Presensi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-green-600 mb-4\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 29\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-600 mb-4\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCheckIn,\n          className: \"w-full py-3 px-4 bg-green-600 text-white font-semibold rounded-md shadow-sm hover:bg-green-700\",\n          children: \"Check-In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCheckOut,\n          className: \"w-full py-3 px-4 bg-red-600 text-white font-semibold rounded-md shadow-sm hover:bg-red-700\",\n          children: \"Check-Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}\n_s(AttendancePage, \"f7KChnFf/IryiT8VT2Z0N6rFcVY=\", false, function () {\n  return [useNavigate];\n});\n_c = AttendancePage;\nexport default AttendancePage;\nvar _c;\n$RefreshReg$(_c, \"AttendancePage\");","map":{"version":3,"names":["React","useState","axios","useNavigate","jsxDEV","_jsxDEV","getToken","localStorage","getItem","AttendancePage","_s","message","setMessage","error","setError","navigate","API_URL","getAuthConfig","token","headers","Authorization","handleCheckIn","config","response","post","data","err","handleCheckOut","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["E:/PAW/PRKPAW-20230140039/my-react-app/src/components/PresensiPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n// Fungsi helper untuk mengambil token dari localStorage\r\nconst getToken = () => localStorage.getItem(\"token\");\r\n\r\nfunction AttendancePage() {\r\n    // State untuk pesan sukses/error\r\n    const [message, setMessage] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    const navigate = useNavigate();\r\n\r\n    const API_URL = \"http://localhost:3001/api/attendance\"; \r\n\r\n    // Konfigurasi Header untuk menyertakan JWT\r\n    const getAuthConfig = () => {\r\n        const token = getToken();\r\n        if (!token) {\r\n            navigate(\"/login\"); // Redirect jika token tidak ada\r\n            return null;\r\n        }\r\n        return {\r\n            headers: {\r\n                Authorization: `Bearer ${token}`, // Menyertakan token JWT\r\n            },\r\n        };\r\n    };\r\n\r\n    const handleCheckIn = async () => {\r\n        setError(\"\");\r\n        setMessage(\"\");\r\n        const config = getAuthConfig();\r\n        if (!config) return;\r\n\r\n        try {\r\n            // POST /api/attendance/check-in\r\n            const response = await axios.post(\r\n                `${API_URL}/check-in`,\r\n                {}, \r\n                config\r\n            );\r\n            setMessage(`Check-In Berhasil: ${response.data.message}`);\r\n        } catch (err) {\r\n            setError(err.response ? err.response.data.message : \"Check-in gagal\");\r\n        }\r\n    };\r\n\r\n    const handleCheckOut = async () => {\r\n        setError(\"\");\r\n        setMessage(\"\");\r\n        const config = getAuthConfig();\r\n        if (!config) return;\r\n\r\n        try {\r\n            // POST /api/attendance/check-out\r\n            const response = await axios.post(\r\n                `${API_URL}/check-out`,\r\n                {}, // Body kosong, karena userId diambil dari JWT payload\r\n                config\r\n            );\r\n            setMessage(`Check-Out Berhasil: ${response.data.message}`);\r\n        } catch (err) {\r\n            setError(err.response ? err.response.data.message : \"Check-out gagal\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\r\n            <div className=\"bg-white p-8 rounded-lg shadow-md w-full max-w-md text-center\">\r\n                <h2 className=\"text-3xl font-bold mb-6 text-gray-800\">\r\n                    Lakukan Presensi\r\n                </h2>\r\n                {/* Menampilkan pesan sukses atau error */}\r\n                {message && <p className=\"text-green-600 mb-4\">{message}</p>}\r\n                {error && <p className=\"text-red-600 mb-4\">{error}</p>}\r\n                <div className=\"flex space-x-4\">\r\n                    <button\r\n                        onClick={handleCheckIn}\r\n                        className=\"w-full py-3 px-4 bg-green-600 text-white font-semibold rounded-md shadow-sm hover:bg-green-700\"\r\n                    >\r\n                        Check-In\r\n                    </button>\r\n                    <button\r\n                        onClick={handleCheckOut}\r\n                        className=\"w-full py-3 px-4 bg-red-600 text-white font-semibold rounded-md shadow-sm hover:bg-red-700\"\r\n                    >\r\n                        Check-Out\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AttendancePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}